# Nixpacks configuration for Railway deployment
# Optimized for minimal resource usage and cost protection

[phases.setup]
# Essential system dependencies
aptPkgs = [
    "ffmpeg",           # Video processing
    "libsm6",           # OpenCV dependency
    "libxext6",         # OpenCV dependency
    "libxrender-dev",   # OpenCV dependency
    "libgomp1",         # OpenMP for parallel processing
    "libopencv-dev"     # OpenCV development files
]

[phases.install]
# Install Python dependencies with minimal cache
cmds = [
    "pip install --upgrade pip setuptools wheel",
    "pip install --no-cache-dir -r requirements.txt"
]

[phases.build]
# No build step needed for Python scripts
cmds = []

[start]
# Start command for Railway
cmd = "python main.py"

# Note: Runtime environment variables should be set in railway.toml's [env] section
# or via Railway dashboard, not in nixpacks.toml which is for build-time configuration
